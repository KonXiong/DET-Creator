/******************************************************************************************
Author:  熊康
E-mail： 1390000666@qq.com
Device:  DSE-EP2C5
Tool:    Quartus 9.0
Function:相位寄存器
Version: 2022-3-17 v1.0
********************************************************************************************/
module phase(clk,rst,M,fre);
input clk,rst;  
input [3:0]M; //M：频率控制字
output reg [7:0] fre;  //输出的相位
reg [19:0] N;  //相位寄存

always @(posedge clk or negedge rst) begin
    if(!rst)
        N <= 0;
    else begin
        case(M)
            4'b0000 : N <= N + 20'b0000_0000_0000_0000_0000;
            4'b0001 : N <= N + 20'b0000_0000_0000_0000_0001;
            4'b0010 : N <= N + 20'b0000_0000_0000_0000_0010;
            4'b0011 : N <= N + 20'b0000_0000_0000_0000_0100;
            4'b0100 : N <= N + 20'b0000_0000_0000_0000_1000;
            4'b0101 : N <= N + 20'b0000_0000_0000_0001_0000;
            4'b0110 : N <= N + 20'b0000_0000_0000_0010_0000;
            4'b0111 : N <= N + 20'b0000_0000_0000_0100_0000;
            4'b1000 : N <= N + 20'b0000_0000_0000_1000_0000;
            4'b1001 : N <= N + 20'b0000_0000_0001_0000_0000;
            4'b1010 : N <= N + 20'b0000_0000_0010_0000_0000;
            4'b1011 : N <= N + 20'b0000_0000_0100_0000_0000;
            4'b1100 : N <= N + 20'b0000_0000_0000_0000_0000;
            4'b1101 : N <= N + 20'b0000_0001_0000_0000_0000;
            4'b1110 : N <= N + 20'b0000_0010_0000_0000_0000;
            4'b1111 : N <= N + 20'b0000_0100_0000_0000_0000;
        endcase
        fre[7:0] <= N[19:12];
    end

end
    
endmodule